function isMobileDevice(){return window.matchMedia('(max-width: 768px)').matches}async function cargarComponente(url,targetElement){if(!targetElement){console.error(`Error: El elemento destino no fue proporcionado para cargar ${url}.`);throw new Error(`Elemento destino no proporcionado para ${url}.`)}try{const respuesta=await fetch(url);if(!respuesta.ok){throw new Error(`HTTP error ${respuesta.status} al cargar ${url}`)}const html=await respuesta.text();targetElement.innerHTML=html}catch(error){console.error(`No se pudo cargar el componente desde ${url} en el elemento destino:`,error);targetElement.innerHTML=`<p>Error al cargar contenido para ${tagName}.</p>`;throw error}}function initializeDarkModeToggle(){const D_MODE_TOGGLE_DESKTOP_SELECTOR='.dark-mode-toggle-desktop';const D_MODE_TOGGLE_MOBILE_SELECTOR='.dark-mode-toggle-mobile';const THEME_KEY='theme';const DARK_THEME_CLASS='dark-mode';const LIGHT_ICON='üåô';const DARK_ICON='‚òÄÔ∏è';const desktopToggle=document.querySelector(D_MODE_TOGGLE_DESKTOP_SELECTOR);const mobileToggle=document.querySelector(D_MODE_TOGGLE_MOBILE_SELECTOR);const body=document.body;function applyTheme(theme){if(theme==='dark'){body.classList.add(DARK_THEME_CLASS);if(desktopToggle)desktopToggle.textContent=DARK_ICON;if(mobileToggle)mobileToggle.textContent=DARK_ICON}else{body.classList.remove(DARK_THEME_CLASS);if(desktopToggle)desktopToggle.textContent=LIGHT_ICON;if(mobileToggle)mobileToggle.textContent=LIGHT_ICON}localStorage.setItem(THEME_KEY,theme)}function toggleTheme(){const currentTheme=localStorage.getItem(THEME_KEY)||(body.classList.contains(DARK_THEME_CLASS)?'dark':'light');applyTheme(currentTheme==='dark'?'light':'dark')}if(desktopToggle)desktopToggle.addEventListener('click',toggleTheme);if(mobileToggle)mobileToggle.addEventListener('click',toggleTheme);const savedTheme=localStorage.getItem(THEME_KEY);const prefersDark=window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches;if(savedTheme){applyTheme(savedTheme)}else if(prefersDark){applyTheme('dark')}else{applyTheme('light')}}function initializeHamburgerMenu(){const hamburgerIcon=document.querySelector('.hamburger-menu-icon');const mainNav=document.querySelector('.nav-items-mobile');const NAV_OPEN_CLASS='is-open';if(hamburgerIcon&&mainNav){hamburgerIcon.addEventListener('click',()=>{mainNav.classList.toggle(NAV_OPEN_CLASS);hamburgerIcon.textContent=mainNav.classList.contains(NAV_OPEN_CLASS)?'‚úï':'‚ò∞'})}else{console.warn("Hamburger menu icon or main navigation not found. Hamburger menu functionality not initialized.")}}document.addEventListener('DOMContentLoaded',async()=>{try{const bodyElement=document.body;const siteContainer=document.querySelector('.site-container');const mainElement=document.querySelector('.site-container main');if(!bodyElement||!siteContainer||!mainElement){console.error("Error cr√≠tico: No se encontr√≥ 'body', '.site-container' o 'main' dentro de '.site-container'. No se pueden inyectar los componentes principales.");return}const navElement=document.createElement('nav');navElement.classList.add('main-nav');const subscriptionSectionElement=document.createElement('section');subscriptionSectionElement.classList.add('subscription-section');const footerElement=document.createElement('footer');const navUrl=isMobileDevice()?'/complements/nav-mobile.html':'/complements/nav-regular.html';const loadNavContentPromise=cargarComponente(navUrl,navElement);const loadSubscriptionContentPromise=cargarComponente('/complements/subscription-section.html',subscriptionSectionElement);const loadFooterContentPromise=cargarComponente('/complements/footer.html',footerElement);bodyElement.insertBefore(navElement,siteContainer);await Promise.all([loadNavContentPromise,loadSubscriptionContentPromise,loadFooterContentPromise]);siteContainer.appendChild(subscriptionSectionElement);bodyElement.appendChild(footerElement);initializeDarkModeToggle();if(isMobileDevice()){initializeHamburgerMenu()}}catch(error){console.error("Error durante la carga inicial de componentes o su inicializaci√≥n:",error)}});