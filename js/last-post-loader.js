async function loadLatestPosts(count=3,manifestPath='content/posts-manifest.json'){const introParagraphSelector='#intro-paragraph';const postsContainerId='latest-posts-container';const contentBasePath='content/';try{const response=await fetch(manifestPath);if(!response.ok){console.error(`Error al cargar el manifiesto de posts desde ${manifestPath}: ${response.statusText}`);const introParagraphEl=document.querySelector(introParagraphSelector);if(introParagraphEl){const errorDisplay=document.createElement('p');errorDisplay.textContent='No se pudieron cargar las últimas entradas del blog en este momento.';errorDisplay.style.color='red';introParagraphEl.parentNode.insertBefore(errorDisplay,introParagraphEl.nextSibling)}return}const allPostsData=await response.json();if(!Array.isArray(allPostsData)){console.error('Los datos del manifiesto de posts no son un array.');return}const sortedPosts=allPostsData.filter(post=>post.publicationDate).sort((a,b)=>new Date(b.publicationDate)-new Date(a.publicationDate));const latestPosts=sortedPosts.slice(0,count);if(latestPosts.length===0){console.info('No hay posts disponibles para mostrar o hay un problema con los datos de los posts.');return}const introParagraph=document.querySelector(introParagraphSelector);if(!introParagraph){console.error(`Elemento de anclaje "${introParagraphSelector}" no encontrado en el DOM.`);return}let postsContainer=document.getElementById(postsContainerId);if(postsContainer){postsContainer.innerHTML=''}else{postsContainer=document.createElement('section');postsContainer.id=postsContainerId;postsContainer.className='latest-posts-section';introParagraph.parentNode.insertBefore(postsContainer,introParagraph.nextSibling)}const fragment=document.createDocumentFragment();latestPosts.forEach(post=>{const postElement=document.createElement('article');postElement.className='latest-post';const imageContainer=document.createElement('div');imageContainer.className='post-image-container';const image=document.createElement('img');image.src=post.image?`img/${post.image}`:'assets/images/default-post-image.png';image.alt=post.title||'Imagen del artículo';image.className='post-image';image.loading='lazy';imageContainer.appendChild(image);const detailsContainer=document.createElement('div');detailsContainer.className='post-details';const title=document.createElement('h3');title.className='post-title';const titleLink=document.createElement('a');const postUrl=post.file?`${contentBasePath}${post.file}`:'#';titleLink.href=postUrl;titleLink.textContent=post.title||'Artículo sin título';title.appendChild(titleLink);const coverLink=document.createElement('a');titleLink.href=post.file?`${contentBasePath}${post.file}`:'#';titleLink.textContent=post.title||'Artículo sin título';title.appendChild(titleLink);const subtitle=document.createElement('h4');subtitle.className='post-subtitle';subtitle.textContent=post.subtitle||'';const excerpt=document.createElement('p');excerpt.className='post-excerpt';excerpt.textContent=post.excerpt||'';const dateElement=document.createElement('p');dateElement.className='post-publication-date';const timeTag=document.createElement('time');if(post.publicationDate){timeTag.dateTime=post.publicationDate;try{const dateObj=new Date(post.publicationDate.includes('T')?post.publicationDate:`${post.publicationDate}T00:00:00`);if(!isNaN(dateObj)){timeTag.textContent=`Fecha de publicación: ${dateObj.toLocaleDateString('es-ES',{day:'numeric',month:'long',year:'numeric'})}`}else{timeTag.textContent=`Fecha de publicación: ${post.publicationDate}`}}catch(e){timeTag.textContent=`Fecha de publicación: ${post.publicationDate}`}}else{timeTag.textContent='Fecha de publicación no disponible'}dateElement.appendChild(timeTag);detailsContainer.appendChild(title);if(post.subtitle&&post.subtitle.trim()!=='')detailsContainer.appendChild(subtitle);if(post.excerpt&&post.excerpt.trim()!=='')detailsContainer.appendChild(excerpt);detailsContainer.appendChild(dateElement);coverLink.href=postUrl;coverLink.className='post-cover-link';coverLink.setAttribute('aria-label',`Leer más sobre ${post.title||'este artículo'}`);postElement.appendChild(coverLink);postElement.appendChild(imageContainer);postElement.appendChild(detailsContainer);fragment.appendChild(postElement)});postsContainer.appendChild(fragment)}catch(error){console.error('Error al cargar o mostrar los últimos posts:',error)}}